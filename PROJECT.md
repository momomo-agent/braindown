# BrainDown — PROJECT.md

## 产品定位
专门用来阅读和编辑 AI 生成的 Markdown 文件的 Mac 原生工具。

## 核心功能清单

### 文件管理
| # | 功能 | 状态 |
|---|------|------|
| F1 | 打开文件夹（Open Folder） | ✅ |
| F2 | 左侧文件树（只显示 .md 文件和文件夹） | ✅ |
| F3 | 点击文件在右侧打开 | ✅ |
| F4 | 文件树折叠/展开文件夹 | ✅ |
| F5 | 文件修改后标记未保存状态 | ✅ |
| F6 | ⌘S 保存文件 | ✅ |

### 编辑器
| # | 功能 | 状态 |
|---|------|------|
| E1 | 所见即所得 Markdown 渲染（不显示 ** # 等语法符号） | ✅ |
| E2 | 标题渲染（H1-H6 不同字号） | ✅ |
| E3 | 粗体/斜体/行内代码渲染 | ✅ |
| E4 | 代码块渲染（带背景色区分） | ✅ |
| E5 | 列表渲染（有序/无序） | ✅ |
| E6 | 链接渲染（可点击） | ✅ |
| E7 | 引用块渲染 | ✅ |
| E8 | 分割线渲染 | ✅ |
| E9 | 表格渲染 | ✅ |
| E10 | 编辑后自动序列化回 Markdown 格式保存 | ✅ |
| E11 | 图片渲染（相对路径和绝对路径，内联显示） | ❌ |

### 文件管理
| # | 功能 | 状态 |
|---|------|------|
| F1 | 打开文件夹（Open Folder） | ✅ |
| F2 | 左侧文件树（显示 .md 文件、图片文件和文件夹） | ✅→待更新 |
| F3 | 点击文件在右侧打开 | ✅ |
| F4 | 文件树折叠/展开文件夹 | ✅ |
| F5 | 文件修改后标记未保存状态 | ✅ |
| F6 | ⌘S 保存文件 | ✅ |

### 排版
| # | 功能 | 状态 |
|---|------|------|
| T1 | 行高 1.7x | ✅ |
| T2 | 内容宽度 680px（约 35 中文字符） | ✅ |
| T3 | 标题字号用大三度音阶比例 | ✅ |
| T4 | 段间距：正文行高的 0.75x | ✅ |

### 应用
| # | 功能 | 状态 |
|---|------|------|
| A1 | 菜单栏标准 Mac 菜单（File → Open Folder, Save） | ✅ |
| A2 | 跟随系统深色/浅色主题 | ✅ |
| A3 | App 图标（蓝色系渐变 + 文档图案） | ✅ |
| A4 | 记住上次打开的文件夹（UserDefaults） | ✅ |
| A5 | 代码签名 | ✅ |

## 技术方案
- SwiftUI + NSTextView（自定义 MarkdownTextStorage）
- 富文本编辑 + Markdown 双向序列化
- XcodeGen 生成 xcodeproj
- macOS 14.0+, Swift 5.9

## 当前状态
✅ 全部功能已完成，已编译、签名、打包。

## 已知问题
（暂无）

## 验证清单
每次交付前必须自查：
1. ✅ 编译通过
2. ✅ 能打开文件夹并显示文件树
3. ✅ 能打开 .md 文件并正确渲染
4. ✅ 能编辑并保存
5. ✅ App 图标正确显示
6. ✅ 签名正确
